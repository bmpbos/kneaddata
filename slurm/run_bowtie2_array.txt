#!/bin/bash 

#SBATCH -N 1 # Number of machines to use

#SBATCH -n 2 # Number of cores 

#SBATCH -t 360 # Runtime in minutes 

#SBATCH -p serial_requeue #Partition to submit to 

#SBATCH --mem=4000 #Memory per cpu in MB (see also --mem)

#SBATCH -J run-bowtie2-array

#SBATCH -e run-bowtie2-human-%A_%a.err

#SBATCH -o run-bowtie2-human-%A_%a.out

module load centos6/bowtie2-2.2.1

cd ~/kneadData/data/test_data/human-$SLURM_ARRAY_TASK_ID

time bowtie2 -x /n/huttenhower_lab_nobackup/data/kneadData/databases/humanGenome/Homo_sapiens -1 human-$SLURM_ARRAY_TASK_ID.out.trimmed.1.fastq -2 human-$SLURM_ARRAY_TASK_ID.out.trimmed.2.fastq -S human-$SLURM_ARRAY_TASK_ID-bowtie2_pe.sam

time bowtie2 -x /n/huttenhower_lab_nobackup/data/kneadData/databases/humanGenome/Homo_sapiens -U human-$SLURM_ARRAY_TASK_ID.out.trimmed.single.1.fastq -S human-$SLURM_ARRAY_TASK_ID-bowtie2_se_1.sam

time bowtie2 -x /n/huttenhower_lab_nobackup/data/kneadData/databases/humanGenome/Homo_sapiens -U human-$SLURM_ARRAY_TASK_ID.out.trimmed.single.2.fastq -S human-$SLURM_ARRAY_TASK_ID-bowtie2_se_2.sam
